<div class="upload-container">
    <div class="card">
        <p-toast/>
        <p-fileupload name="myfile[]" url="https://www.primefaces.org/cdn/api/upload.php" [multiple]="false"
                      accept="image/*, *.pdf" maxFileSize="1000000" (onUpload)="onTemplatedUpload()"
                      (onSelect)="onSelectedFiles($event)"
                      [style]="{'height': '30rem', 'background': 'var(--p-stone-50)'}"
        >
            <ng-template #header let-files let-chooseCallback="chooseCallback" let-clearCallback="clearCallback"
                         let-uploadCallback="uploadCallback">
                <div class="buttons-container">
                    <div class="flex gap-2 aaa">
                        <p-button (onClick)="choose($event, chooseCallback)" icon="pi pi-images" [rounded]="true"
                                  [outlined]="true"/>
                        <p-button (onClick)="uploadEvent(uploadCallback)" icon="pi pi-cloud-upload" [rounded]="true"
                                  [outlined]="true" severity="success" [disabled]="!files || files.length === 0"/>
                        <p-button (onClick)="clearCallback()" icon="pi pi-times" [rounded]="true" [outlined]="true"
                                  severity="danger" [disabled]="!files || files.length === 0"/>
                    </div>
                    <p-progressbar [value]="totalSizePercent" [showValue]="false"
                                   class="w-full md:w-20rem h-1 w-full md:ml-auto bar">
                        <span class="whitespace-nowrap">{{ totalSize }}B / 1Mb</span>
                    </p-progressbar>
                </div>
            </ng-template>
            <ng-template #content let-files let-uploadedFiles="uploadedFiles"
                         let-removeFileCallback="removeFileCallback"
                         let-removeUploadedFileCallback="removeUploadedFileCallback">
                <div class="flex flex-col gap-8 pt-4 fff">
                    @if (files?.length > 0) {
                        <div>
<!--                            <h5>Pending</h5>-->
                            <div class="flex flex-wrap gap-4 ">
                                @for (file of files; track file.name; let i = $index) {
                                    <div
                                        class="p-8 rounded-border flex flex-col border border-surface items-center gap-4 ggg">
                                        <div>
                                            <img role="presentation" [alt]="file.name" [src]="file.objectURL"
                                                 width="100" height="50"/>
                                        </div>
                                        <span
                                            class="font-semibold text-ellipsis max-w-60 whitespace-nowrap overflow-hidden">{{ file.name }}</span>
                                        <div>{{ formatSize(file.size) }}</div>
                                        <p-badge value="Pending" severity="warn"/>
                                        <p-button icon="pi pi-times"
                                                  (click)="onRemoveTemplatingFile($event, file, removeFileCallback, i)"
                                                  [outlined]="true" [rounded]="true" severity="danger"/>
                                    </div>
                                }
                            </div>
                        </div>
                    }

                    @if (uploadedFiles?.length > 0) {
                        <div>
                            <h5>Completed</h5>
                            <div class="flex flex-wrap gap-4">
                                @for (file of uploadedFiles; track file.name; let i = $index) {
                                    <div class="card m-0 px-12 flex flex-col border border-surface items-center gap-4">
                                        <div>
                                            <img role="presentation" [alt]="file.name" [src]="file.objectURL"
                                                 width="100" height="50"/>
                                        </div>
                                        <span
                                            class="font-semibold text-ellipsis max-w-60 whitespace-nowrap overflow-hidden">{{ file.name }}</span>
                                        <div>{{ formatSize(file.size) }}</div>
                                        <p-badge value="Completed" class="mt-4" severity="success"/>
                                        <p-button icon="pi pi-times" (onClick)="removeUploadedFileCallback(i)"
                                                  [outlined]="true" [rounded]="true" severity="danger"/>
                                    </div>
                                }
                            </div>
                        </div>
                    }
                </div>
            </ng-template>
            <ng-template #file></ng-template>
            <ng-template #empty>
                <div class="yyy">
                    <i class="pi pi-cloud-upload xxx"></i>
                    <p class="text">Drag and drop files to here to upload.</p>
                </div>
            </ng-template>
        </p-fileupload>
    </div>
</div>
